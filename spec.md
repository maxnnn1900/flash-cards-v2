Для текущей версии кода, которая реализует интерактивные флеш-карты с динамическим весом и подсветкой синтаксиса, вот Техническое Задание (ТЗ):

## Техническое Задание: Веб-приложение "Флеш-карты для обучения"

### 1. Общее описание

Разработать одностраничное веб-приложение для создания, загрузки, изучения и управления флеш-картами. Приложение должно позволять пользователю загружать колоды карточек из текстового формата, изучать их с помощью адаптивного алгоритма на основе веса, отслеживать прогресс и управлять сохраненными колодами. Приложение должно быть реализовано на чистом HTML, CSS (с использованием TailwindCSS) и JavaScript (с использованием фреймворка Vue.js 2).

### 2. Функциональные требования

#### 2.1. Основные режимы работы (вкладки навигации)

Приложение должно иметь три основные вкладки:
* **"Загрузка колоды"**: Для импорта новых колод карточек.
* **"Изучение"**: Для работы с активной колодой (показ вопросов, ответов, оценка).
* **"Управление колодами"**: Для просмотра списка сохраненных колод, их активации, переименования, сброса прогресса и удаления.

#### 2.2. Загрузка колоды

* **Текстовый ввод**: Предоставить текстовое поле (textarea) для ввода карточек.
* **Формат ввода**:
    * Каждая карточка начинается с `Q.` (вопрос) и `A.` (ответ).
    * Карточки разделяются строкой `---`.
    * Поддерживается многострочный текст для вопросов и ответов.
    * Поддержка блоков кода в ответе с использованием тройных бэктиков (\`\`\`), опционально с указанием языка (например, `` ```javascript ``).
* **Парсинг**: При нажатии кнопки "Загрузить колоду" приложение должно корректно парсить введенный текст, создавая объекты карточек.
* **Создание колоды**: Каждая загруженная порция карточек формирует новую "колоду" с автоматически генерируемым именем (например, "Колода от [дата время загрузки]").
* **Сохранение**: Загруженные колоды должны сохраняться в LocalStorage браузера.
* **Сообщения**: Отображать сообщения об успехе/ошибке загрузки.
* **Переключение**: После успешной загрузки автоматически переключаться на вкладку "Изучение" с новой колодой.

#### 2.3. Изучение карточек

* **Выбор колоды**: Отображать название активной колоды.
* **Показ вопроса**: Отображать только вопрос текущей карточки.
* **Оценка карточки (до показа ответа)**:
    * Должны быть три кнопки: "Забыл", "Припоминаю", "Знаю".
    * При первом нажатии на любую из этих кнопок:
        * Показывается ответ.
        * Применяется логика изменения веса карточки (см. п. 2.4).
        * Кнопки "Забыл", "Припоминаю", "Знаю" скрываются.
        * Появляется кнопка "Следующая карточка".
* **Подсветка синтаксиса**: Кодовые блоки в ответе должны быть подсвечены синтаксисом (с использованием Highlight.js).
* **Отображение данных карточки**: Под ответом должны отображаться текущий "Вес карточки" (с точностью до двух знаков после запятой) и "Показов" (количество раз, когда карточка была показана в режиме изучения).
* **Навигация по карточкам (после показа ответа)**:
    * При нажатии на кнопку "Следующая карточка":
        * Скрывается ответ.
        * Загружается следующая карточка на основе алгоритма выбора (см. п. 2.4).
        * Показываются три кнопки оценки ("Забыл", "Припоминаю", "Знаю").
        * Кнопка "Следующая карточка" скрывается.
* **Удаление текущей карточки**: Предусмотреть кнопку/иконку для удаления текущей карточки из активной колоды с подтверждением.

#### 2.4. Алгоритм выбора карточек и изменения веса

* **Динамический вес**: Каждая карточка должна иметь числовой `weight` (вес) и `attempts` (количество показов).
* **Начальный вес**: При создании новой карточки `weight` = 1, `attempts` = 0.
* **Случайный выбор по весу**: Карточки для изучения должны выбираться случайным образом, но с учетом их веса. Карточки с большим весом должны иметь значительно большую вероятность быть показанными.
* **Логика изменения веса при оценке**:
    * **"Знаю"**: `weight` уменьшается (например, `weight = weight * 0.4`), чтобы карточка показывалась реже.
    * **"Припоминаю"**: `weight` не меняется (например, `weight = weight * 1.0`), чтобы карточка оставалась в среднем диапазоне частоты.
    * **"Забыл"**: `weight` увеличивается (например, `weight = min(weight * 2.0 + 0.5, 10)`), чтобы карточка показывалась значительно чаще. Максимальный вес ограничен (например, 10).
* **Минимальный вес**: `weight` не должен опускаться ниже `0.01` (или другого небольшого значения), чтобы карточка полностью не исчезала, но фактически переставала показываться (фильтрация по `weight > 0.05`).
* **Счетчик показов**: `attempts` увеличивается на 1 при каждом показе карточки.
* **Сохранение**: Изменения веса и количества показов должны сохраняться в LocalStorage.

#### 2.5. Управление колодами

* **Список колод**: Отображать список всех сохраненных колод с их названиями, датой создания и количеством карточек.
* **Действия с колодой**: Для каждой колоды предоставить кнопки действий:
    * **"Изучить"**: Загружает выбранную колоду как активную и переключается на вкладку "Изучение".
    * **"Переименовать"**: Открывает модальное окно для ввода нового имени колоды.
    * **"Сбросить прогресс"**: Сбрасывает `weight` всех карточек в этой колоде к начальному значению (1) и `attempts` к 0, с подтверждением. Если это активная колода, то перезагружает текущую карточку.
    * **"Удалить"**: Полностью удаляет колоду из LocalStorage с подтверждением. Если удаляется активная колода, то текущая карточка обнуляется и вид переключается на "Управление колодами".

#### 2.6. Сохранение данных

* Все колоды и их состояния (карточки, вопросы, ответы, веса, попытки) должны сохраняться в LocalStorage браузера.
* Приложение должно загружать сохраненные колоды при старте.

### 3. Технические требования

* **HTML**: Чистый HTML5-документ.
* **CSS**: TailwindCSS 2.x для стилизации. Возможно использование минимального количества пользовательских CSS для специфических случаев (например, стилизация `pre` и `code` для Highlight.js).
* **JavaScript**:
    * Фреймворк Vue.js 2 (CDN).
    * Библиотека Highlight.js (CDN) для подсветки синтаксиса. Использовать полный билд (`highlight.min.js`) и выбранную тему (`atom-one-dark.min.css`).
    * Библиотека Font Awesome (CDN) для иконок (например, иконка корзины).
* **ES6+**: Использование современных возможностей JavaScript.
* **UUID**: Для уникальной идентификации карточек и колод использовать простую функцию генерации UUID.

### 4. Дизайн и пользовательский интерфейс

* **Адаптивный дизайн**: Приложение должно быть удобно использовать на различных устройствах (десктопы, планшеты, мобильные телефооны).
* **Интуитивность**: UI должен быть понятным и простым в использовании.
* **Визуальная обратная связь**: Сообщения об успехе/ошибке, подтверждения действий.

### 5. Структура проекта (файлов)

* Один HTML-файл (`index.html`), содержащий всю структуру, стили и скрипты.

### 6. Дополнительные замечания

* Обработка ошибок парсинга и пользовательского ввода должна быть предусмотрена.
* Все взаимодействия с LocalStorage должны быть безопасными и не блокировать основной поток UI.

---
